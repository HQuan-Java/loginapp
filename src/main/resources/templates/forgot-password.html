<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Quên mật khẩu</title>
    <link rel="stylesheet" th:href="@{/css/forgot-password.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=check_small,close_small" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body class="d-flex justify-content-center align-items-center vh-100 bg-light">
<div class="text-center mb-4">
    <img th:src="@{/images/logoTcom.svg}" alt="Logo" class="mb-3">
</div>
<div class="card forgot-password-card">
    <form action="/forgot-password" method="POST">
        <h5 class="text-center">Vui lòng nhập địa chỉ email đã đăng ký của bạn</h5>
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Nhập email" required>
        </div>
        <button type="submit" class="btn btn-primary w-100">Đặt lại mật khẩu</button>
        <a href="/login" class="btn-login d-block">Đăng nhập</a>
    </form>
</div>
<!-- Modal thông báo thành công -->
<div class="modal" tabindex="-1" id="successModal" th:if="${message}">
    <div class="modal-dialog">
        <div class="modal-content text-center p-4">
            <!-- Nội dung chính của modal -->
            <div class="modal-content-body">
                <!-- Icon thành công -->
                <div class="checkmark-container">
                    <span class="material-symbols-outlined">check_small</span>
                </div>
                <!-- Tiêu đề -->
                <div class="modal-header-content">
                    <h5 class="modal-title">Thành công</h5>
                    <div class="modal-body">
                        <span class="text-muted" th:text="${message}">
                            Chúng tôi đã gửi cho bạn liên kết đặt lại mật khẩu qua email.
                        </span>
                    </div>
                </div>
            </div>
            <!-- Nút Đăng nhập -->
            <div>
                <a href="/login" class="btn btn-primary">Đăng nhập</a>
            </div>
        </div>
    </div>
</div>

<!-- Modal thông báo lỗi -->
<div class="modal" tabindex="-1" id="errorModal" th:if="${error}">
    <div class="modal-dialog">
        <div class="modal-content text-center p-4">
            <!-- Nội dung chính của modal -->
            <div class="modal-content-body">
                <!-- Icon lỗi -->
                <div class="error-container">
                    <span class="material-symbols-outlined">close_small</span>
                </div>
                <!-- Tiêu đề -->
                <div class="modal-header-content">
                    <h5 class="modal-title">Lỗi!</h5>
                    <div class="modal-body">
                        <span class="text-muted" th:text="${error}">
                            Email không tồn tại trong hệ thống.
                        </span>
                    </div>
                </div>
            </div>
            <!-- Nút Đăng nhập -->
            <div>
                <a href="/login" class="btn btn-primary">Đăng nhập</a>
            </div>
        </div>
    </div>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    window.onload = function() {
        console.log("Message:", /*[[${message}]]*/ null);
        console.log("Error:", /*[[${error}]]*/ null);

        var successModal = document.getElementById('successModal');
        var errorModal = document.getElementById('errorModal');

        if(successModal) {
            var modal = new bootstrap.Modal(successModal);
            modal.show();
        }

        if(errorModal) {
            var modal = new bootstrap.Modal(errorModal);
            modal.show();
        }
    };
    /*]]>*/
</script>
</body>
</html>